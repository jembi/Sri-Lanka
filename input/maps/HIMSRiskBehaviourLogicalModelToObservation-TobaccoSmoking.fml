map "http://openhie.org/fhir/sri-lanka/StructureMap/HIMSRiskBehaviourLogicalModelToObservation-TobaccoSmoking" = "HIMSRiskBehaviourLogicalModelToObservation-TobaccoSmoking"

uses "http://openhie.org/fhir/sri-lanka/StructureDefinition/HIMSRiskBehaviourDataDictionary" alias IMMZC as source
uses "http://hl7.org/fhir/StructureDefinition/Bundle" alias Bundle as target
uses "http://hl7.org/fhir/StructureDefinition/Observation" alias Observation as target

//Maps the HIMS logical model data elements to the Observation resource data elements.

group DataDictToObservation (
  source immzc : IMMZC,
  target observation: Observation
) {
  immzc.tobaccoSmoking as tobaccoSmoking -> observation as obs then {
    tobaccoSmoking -> obs.valueCodeableConcept = tobaccoSmoking "SetTobaccoSmokingValue";
  } "SetTobaccoSmoking";
}